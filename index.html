<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Scenario Projections for RSV Hospitalizations â€¢ R.Scenario.Vax</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Scenario Projections for RSV Hospitalizations">
<meta name="description" content="This package will fit a dynamic RSV transmission model to time series data and run scenario projections for immunization uptake.">
<meta property="og:description" content="This package will fit a dynamic RSV transmission model to time series data and run scenario projections for immunization uptake.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">R.Scenario.Vax</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/chelsea-hansen/R.Scenario.Vax/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rscenariovax">R.Scenario.Vax<a class="anchor" aria-label="anchor" href="#rscenariovax"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of R.Scenario.Vax is to fit a deterministic, compartmental transmission model to RSV hospitalization data and provide scenario projections for the number of hospitalizations averted due to new immunization products.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of R.Scenario.Vax from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"chelsea-hansen/R.Scenario.Vax"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Here we will walk through an example using data from New York state.</p>
<div class="section level3">
<h3 id="sample-data">Sample Data<a class="anchor" aria-label="anchor" href="#sample-data"></a>
</h3>
<p>The package includes 2 built-in data sets based on data from <a href="https://data.cdc.gov/Public-Health-Surveillance/Weekly-Rates-of-Laboratory-Confirmed-RSV-Hospitali/29hc-w46k/about_data" class="external-link">RSV-Net</a>.</p>
<ul>
<li><p><code>timeseries</code>: Weekly time series of RSV hospitalizations in each state (all ages)</p></li>
<li><p><code>age_distribution</code>: The proportion of RSV hospitalizations in each age group (based on the 2018-19 and 2019-20 seasons only)</p></li>
</ul>
<p>Notes:</p>
<ul>
<li><p>RSV-Net provides data on RSV hospitalization rates. We have converted these to an approximate number of hospitalizations for use in the model.</p></li>
<li><p>RSV-Net did not include data for children until 2018. For the states which contributed data for adults prior to 2018, simulated data for children has been added based on the weekly average RSV hospitalization rate during the 2018-19 and 2019-20 RSV seasons.</p></li>
</ul>
<p><img src="reference/figures/README-example-1.png" width="100%"><img src="reference/figures/README-example-2.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="step-1-retrieve-starting-values-and-fixed-parameters">Step 1: Retrieve starting values and fixed parameters<a class="anchor" aria-label="anchor" href="#step-1-retrieve-starting-values-and-fixed-parameters"></a>
</h3>
<p>The <code>get_data</code> function will retrieve the fixed parameter values as well as the population data needed to run the model. This function returns a list with 3 values. 1. Fixed parameters 2. Initial values for model compartments 3. Vectorized version of 2 from above</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chelsea-hansen/R.Scenario.Vax" class="external-link">R.Scenario.Vax</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ny_data</span> <span class="op">=</span> <span class="fu"><a href="reference/get_data.html">get_data</a></span><span class="op">(</span>state_or_county<span class="op">=</span><span class="st">"state"</span>,state_abbr<span class="op">=</span><span class="st">"NY"</span>,county_name<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fixed_parameters</span> <span class="op">=</span> <span class="va">ny_data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">yinit</span> <span class="op">=</span> <span class="va">ny_data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">yinit.vector</span> <span class="op">=</span> <span class="va">ny_data</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-fit-model-to-data">Step 2: Fit model to data<a class="anchor" aria-label="anchor" href="#step-2-fit-model-to-data"></a>
</h3>
<p>the <code>fit_model</code> function will find the best fit parameters using maximum likelihood estimation. The model will fit 7 parameters in total. But first we will extract the data for New York from the sample data sets. We also only want to fit to data before the COVID-19 pandemic. The function will produce a figure when the fitting is complete showing the fit to the timeseries and age distribution data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">timeseries_ny</span> <span class="op">=</span> <span class="va">timeseries</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">state</span><span class="op">==</span><span class="st">"New York"</span>,<span class="va">date</span><span class="op">&lt;</span><span class="st">'2020-04-01'</span><span class="op">)</span></span>
<span><span class="va">age_distribution_ny</span> <span class="op">=</span> <span class="va">age_distribution</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">state</span><span class="op">==</span><span class="st">"New York"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fitNY</span> <span class="op">=</span> <span class="fu"><a href="reference/fit_model.html">fit_model</a></span><span class="op">(</span>time_series <span class="op">=</span> <span class="va">timeseries_ny</span><span class="op">$</span><span class="va">value</span>, </span>
<span>                  age_dist <span class="op">=</span> <span class="va">age_distribution_ny</span><span class="op">$</span><span class="va">proportion</span>, </span>
<span>                  parmset <span class="op">=</span> <span class="va">fixed_parameters</span>,</span>
<span>                  yinit <span class="op">=</span> <span class="va">yinit</span>,</span>
<span>                  yinit.vector <span class="op">=</span> <span class="va">yinit.vector</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-steptwo-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="step-3-scenario-projections">Step 3: Scenario Projections<a class="anchor" aria-label="anchor" href="#step-3-scenario-projections"></a>
</h3>
<p>Once you have the fitted parameters use the <code>scenario_projection</code> function to run scenario projections for the number of RSV hospitalizations based on the number of immunizations administered. We are only running one example here, but you can run many scenarios</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">scenarioA</span> <span class="op">=</span> <span class="fu"><a href="reference/scenario_projection.html">scenario_projection</a></span><span class="op">(</span>fitted_parms  <span class="op">=</span> <span class="va">fitNY</span>,</span>
<span>                                parmset <span class="op">=</span> <span class="va">fixed_parameters</span>,</span>
<span>                                yinit<span class="op">=</span><span class="va">yinit</span>,</span>
<span>                                yinit.vector<span class="op">=</span><span class="va">yinit.vector</span>,</span>
<span>                                data_start <span class="op">=</span> <span class="st">'2016-10-08'</span>,</span>
<span>                                projection_start <span class="op">=</span> <span class="st">'2024-10-01'</span>,</span>
<span>                                projection_end <span class="op">=</span> <span class="st">'2025-06-01'</span>,</span>
<span>                                senior_start <span class="op">=</span> <span class="st">'2024-08-01'</span>,</span>
<span>                                senior_end <span class="op">=</span> <span class="st">'2025-05-01'</span>,</span>
<span>                                senior_doses  <span class="op">=</span> <span class="fl">500000</span>,</span>
<span>                                senior_doses_last_year <span class="op">=</span> <span class="fl">1000000</span>,</span>
<span>                                maternal_start <span class="op">=</span> <span class="st">'2024-09-01'</span>,</span>
<span>                                maternal_end <span class="op">=</span> <span class="st">'2025-01-31'</span>,</span>
<span>                                maternal_doses <span class="op">=</span> <span class="fl">50000</span>,</span>
<span>                                monoclonal_catchup_start <span class="op">=</span> <span class="st">'2024-10-01'</span>,</span>
<span>                                monoclonal_catchup_end <span class="op">=</span> <span class="st">'2025-03-01'</span>,</span>
<span>                                monoclonal_catchup_doses <span class="op">=</span> <span class="fl">75000</span>,</span>
<span>                                monoclonal_birth_start <span class="op">=</span> <span class="st">'2024-10-01'</span>,</span>
<span>                                monoclonal_birth_end <span class="op">=</span> <span class="st">'2025-03-01'</span>,</span>
<span>                                monoclonal_birth_doses <span class="op">=</span> <span class="fl">75000</span>,</span>
<span>                                scenario_name<span class="op">=</span><span class="st">"Scenario A"</span>,</span>
<span>                                confidence_intervals <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-stepthree-1.png" width="100%"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/chelsea-hansen/R.Scenario.Vax/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/chelsea-hansen/R.Scenario.Vax/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing R.Scenario.Vax</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Chelsea Hansen <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4526-6772" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chelsea Hansen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
